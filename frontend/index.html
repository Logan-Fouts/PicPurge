<!DOCTYPE html>
<html>
<head>
  <title>Folder Selection</title>
</head>
<body>
  <h1>Select Folder and Options</h1>
  <form id="folderForm">
    <label for="folder">Select Folder:</label>
    <input type="text" id="folder" name="folder" required><br><br>
    
    <label for="aggressiveness">Aggressiveness Level:</label>
    <select id="aggressiveness" name="aggressiveness" required>
      <option value="0">0</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
    </select><br><br>
    
    <label for="keep_non_media">Keep Non-Media:</label>
    <input type="radio" id="keep_non_media" name="keep_non_media" value="true" checked> Keep
    <input type="radio" id="remove_non_media" name="keep_non_media" value="false"> Remove<br><br>
    
    <input type="submit" value="Process">
  </form>

  <script>
    // Function to handle form submission
    function handleSubmit(event) {
      event.preventDefault(); // Prevent default form submission behavior

      // Get the form input values
      const folderPath = document.getElementById('folder').value;
      const aggressiveness = document.getElementById('aggressiveness').value;
      const keepNonMedia = document.querySelector('input[name="keep_non_media"]:checked').value;

      // Construct the API URL
      const apiUrl = `http://localhost:5000/picAPI/run/${encodeURIComponent(folderPath)}/${aggressiveness}/${keepNonMedia}`;

      // Send POST request using AJAX
      fetch(apiUrl, {
        method: 'GET'
      })
      .then(response => {
        if (response.ok) {
          // Handle successful response
          console.log('Request sent successfully!');
          // ...
        } else {
          // Handle error response
          console.error('Error sending request:', response.status, response.statusText);
          // ...
        }
      })
      .catch(error => {
        console.error('Error sending request:', error);
        // ...
      });
    }

    // Add event listener to form submission
    const form = document.getElementById('folderForm');
    form.addEventListener('submit', handleSubmit);
  </script>
</body>
</html>
